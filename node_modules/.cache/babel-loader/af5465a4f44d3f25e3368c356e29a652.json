{"ast":null,"code":"import _objectSpread from \"/home/caio/workspace/wp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/caio/workspace/wp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/caio/workspace/wp/src/compopnents/App.jsx\";\nimport React from 'react';\nimport '../styles/App.css';\nimport LeafletMap from './LeafletMap';\nimport RouterPanel from './RouterPanel';\nimport SimulationOptions from './SimulationOptions';\nimport { MDBIcon } from 'mdbreact';\nimport routers from \"../routersList\";\nimport { clone } from \"../utils\";\n\nconst App = () => {\n  const patrolInitialPosition = {\n    'status': true,\n    'lat': 43.5387,\n    'lng': -79.666,\n    'direction': 0,\n    //   0->east, 1->north, 2->weast, 3->south\n    'step': 14\n  };\n  const intruderInitialPosition = {\n    'status': false,\n    'lat': 43.5392,\n    'lng': -79.6675,\n    'direction': 2,\n    //   0->east, 1->north, 2->weast, 3->south\n    'step': 14\n  };\n  const center = [43.53885796212106, -79.66675600122652];\n\n  const stepCounter = target => {\n    let stepCounter = target.step;\n    let patrolDirection = target.direction;\n\n    if (stepCounter > 0) {\n      stepCounter = stepCounter - 1;\n      return {\n        'step': stepCounter,\n        'direction': patrolDirection\n      };\n    } else {\n      patrolDirection = patrolDirection + 1;\n\n      if (patrolDirection % 2 === 0) {\n        // Mississauga is way too North, I had to adjust \n        stepCounter = 14; // the step because lat!=lgn near the polos\n      } else {\n        stepCounter = 5; // Just 5 steps when walking on vertical.\n      }\n\n      return {\n        'step': stepCounter,\n        'direction': patrolDirection\n      };\n    }\n  };\n\n  const _React$useState = React.useState(true),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        showSimulationOptions = _React$useState2[0],\n        setShowSimulationOptions = _React$useState2[1];\n\n  const _React$useState3 = React.useState(patrolInitialPosition),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        patrol = _React$useState4[0],\n        setPatrol = _React$useState4[1];\n\n  const _React$useState5 = React.useState(intruderInitialPosition),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        intruder = _React$useState6[0],\n        setIntruder = _React$useState6[1];\n\n  const _React$useState7 = React.useState(false),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        showRadius = _React$useState8[0],\n        setShowRadius = _React$useState8[1];\n\n  const toogleShowRadius = () => {\n    setShowRadius(!showRadius);\n  };\n\n  const toogleIntruder = () => {\n    let newIntruder = clone(intruder);\n    newIntruder.status = !intruder.status;\n    setIntruder(newIntruder);\n  };\n\n  const toogleSimulationOptions = () => {\n    setShowSimulationOptions(!showSimulationOptions);\n  };\n\n  const buttonColor = () => {\n    return showSimulationOptions ? 'amber-text' : 'grey-text';\n  };\n\n  const updatePosition = target => {\n    let newTarget = {};\n\n    switch (target.direction % 4) {\n      case 0:\n        newTarget.lat = target.lat;\n        newTarget.lng = target.lng - 0.0001;\n        break;\n\n      case 1:\n        newTarget.lat = target.lat + 0.0001;\n        newTarget.lng = target.lng;\n        break;\n\n      case 2:\n        newTarget.lat = target.lat;\n        newTarget.lng = target.lng + 0.0001;\n        break;\n\n      case 3:\n        newTarget.lat = target.lat - 0.0001;\n        newTarget.lng = target.lng;\n        break;\n\n      default:\n        break;\n    }\n\n    newTarget = _objectSpread({}, newTarget, {}, stepCounter(target));\n    return newTarget;\n  };\n\n  const updatePatrolPosition = () => {\n    setPatrol(updatePosition(patrol));\n  }; // eslint-disable-next-line\n\n\n  const updateIntruderPosition = () => {\n    setIntruder(updatePosition(intruder));\n  };\n\n  const update = () => {\n    updatePatrolPosition();\n  };\n\n  const toRadians = degrees => {\n    var pi = Math.PI;\n    return degrees * (pi / 180);\n  };\n\n  const distance = (position1, position2) => {\n    var R = 6371e3; // metres\n\n    var lat1 = toRadians(position1.lat);\n    var lat2 = toRadians(position2.lat);\n    var latDiff = toRadians(position2.lat - position1.lat);\n    var lngDiff = toRadians(position2.lng - position1.lng);\n    var a = Math.sin(latDiff / 2) * Math.sin(latDiff / 2) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(lngDiff / 2) * Math.sin(lngDiff / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  setTimeout(update, 1000);\n\n  const display = () => {\n    return showSimulationOptions ? 'Show' : 'Hide';\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(MDBIcon, {\n    icon: \"wifi\",\n    size: \"4x\",\n    className: \"amber-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), React.createElement(MDBIcon, {\n    icon: \"bars\",\n    size: \"4x\",\n    className: buttonColor(),\n    onClick: () => toogleSimulationOptions(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(RouterPanel, {\n    className: \"RouterPanel\",\n    routers: routers,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }), React.createElement(LeafletMap, {\n    center: center,\n    routers: routers,\n    patrol: patrol,\n    intruder: intruder,\n    showRadius: showRadius,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }), React.createElement(SimulationOptions, {\n    className: display(),\n    toogleShowRadius: toogleShowRadius,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/caio/workspace/wp/src/compopnents/App.jsx"],"names":["React","LeafletMap","RouterPanel","SimulationOptions","MDBIcon","routers","clone","App","patrolInitialPosition","intruderInitialPosition","center","stepCounter","target","step","patrolDirection","direction","useState","showSimulationOptions","setShowSimulationOptions","patrol","setPatrol","intruder","setIntruder","showRadius","setShowRadius","toogleShowRadius","toogleIntruder","newIntruder","status","toogleSimulationOptions","buttonColor","updatePosition","newTarget","lat","lng","updatePatrolPosition","updateIntruderPosition","update","toRadians","degrees","pi","Math","PI","distance","position1","position2","R","lat1","lat2","latDiff","lngDiff","a","sin","cos","c","atan2","sqrt","setTimeout","display"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles/App.css';\nimport LeafletMap from './LeafletMap';\nimport RouterPanel from './RouterPanel';\nimport SimulationOptions from './SimulationOptions';\nimport {MDBIcon} from 'mdbreact';\nimport routers from \"../routersList\";\nimport {clone} from \"../utils\";\n\nconst App = () => {\n\n  const patrolInitialPosition = {\n  'status': true,\n  'lat': 43.5387, \n  'lng': -79.666,\n  'direction' : 0, //   0->east, 1->north, 2->weast, 3->south\n  'step' : 14,\n  };\n\n  const intruderInitialPosition = {\n    'status' : false,\n    'lat': 43.5392, \n    'lng': -79.6675,\n    'direction' : 2, //   0->east, 1->north, 2->weast, 3->south\n    'step' : 14,\n    };\n\n\n  const center = [43.53885796212106, -79.66675600122652];\n\n  const stepCounter = (target) => {\n    let stepCounter = target.step;\n    let patrolDirection = target.direction;\n    if(stepCounter > 0){\n      stepCounter = stepCounter - 1;\n      return {'step': stepCounter, 'direction': patrolDirection};\n    }\n    else{\n      patrolDirection = patrolDirection + 1;\n      if(patrolDirection%2===0){            // Mississauga is way too North, I had to adjust \n        stepCounter = 14;                   // the step because lat!=lgn near the polos\n      }else{\n        stepCounter = 5;                    // Just 5 steps when walking on vertical.\n      }\n      return {'step': stepCounter, 'direction': patrolDirection};\n    }\n  };\n\n  const [showSimulationOptions, setShowSimulationOptions] = React.useState(true);\n  const [patrol, setPatrol] = React.useState(patrolInitialPosition);\n  const [intruder, setIntruder] = React.useState(intruderInitialPosition);\n  const [showRadius, setShowRadius] = React.useState(false);\n\n  const toogleShowRadius = () => {\n    setShowRadius(!showRadius);\n  };\n\n  const toogleIntruder = () => {\n    let newIntruder = clone(intruder);\n    newIntruder.status = !intruder.status;\n    setIntruder(newIntruder);\n  }\n  \n  const toogleSimulationOptions = () => {\n    setShowSimulationOptions(!showSimulationOptions);\n  };\n\n  const buttonColor = () => {\n    return showSimulationOptions ? 'amber-text' : 'grey-text';\n  };\n\n  const updatePosition = (target) => {\n    let newTarget = {};\n    switch (target.direction%4) {\n      case 0:\n        newTarget.lat = target.lat;\n        newTarget.lng = target.lng - 0.0001;\n        break;\n      case 1:\n        newTarget.lat = target.lat + 0.0001;\n        newTarget.lng = target.lng;\n        break;\n      case 2:\n        newTarget.lat = target.lat;\n        newTarget.lng = target.lng + 0.0001;\n        break;\n      case 3:\n        newTarget.lat = target.lat - 0.0001;\n        newTarget.lng = target.lng;\n        break;\n      default:\n          break;\n    }\n    newTarget = {...newTarget, ...stepCounter(target)};\n    return newTarget;\n  };\n\n  const updatePatrolPosition = () => {\n    setPatrol(updatePosition(patrol));\n  };\n\n  // eslint-disable-next-line\n  const updateIntruderPosition = () => {\n    setIntruder(updatePosition(intruder));\n  };\n\n  const update = () => {\n    updatePatrolPosition();\n  };\n\n  const toRadians = (degrees) =>{\n    var pi = Math.PI;\n    return degrees * (pi/180);\n  };\n\n  const distance =(position1, position2) =>{\n    var R = 6371e3; // metres\n    var lat1 = toRadians(position1.lat);\n    var lat2 = toRadians(position2.lat);\n    var latDiff = toRadians(position2.lat-position1.lat);\n    var lngDiff = toRadians(position2.lng-position1.lng);\n    var a = Math.sin(latDiff/2) * Math.sin(latDiff/2) +\n            Math.cos(lat1) * Math.cos(lat2) *\n            Math.sin(lngDiff/2) * Math.sin(lngDiff/2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n    return R * c;\n  };\n\n  setTimeout(update, 1000);\n\n  const display = () => {\n    return showSimulationOptions ? 'Show' : 'Hide';\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n          <MDBIcon icon = 'wifi' size=\"4x\" className='amber-text'/>\n          <MDBIcon icon = 'bars' size=\"4x\" className={buttonColor()} onClick={()=>toogleSimulationOptions()}  />\n      </header>\n      <div className=\"body\">\n        <RouterPanel className='RouterPanel' routers={routers}/>\n        <LeafletMap center={center} routers={routers} patrol={patrol} intruder={intruder} showRadius={showRadius}/>\n        <SimulationOptions className={display()} toogleShowRadius={toogleShowRadius}/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}